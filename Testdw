local WindUI

do
    local ok, result = pcall(function()
        return require("./src/Init")
    end)
    
    if ok then
        WindUI = result
    else 
        WindUI = loadstring(game:HttpGet("https://raw.githubusercontent.com/Footagesus/WindUI/main/dist/main.lua"))()
    end
end

function createPopup()
    return WindUI:Popup({
        Title = "Welcome to the WindUI!",
        Icon = "bird",
        Content = "การใช้สคลิปไม่ปลอดภัย ใช้อย่างระมัดระวังด้วยนะครับ",
        Buttons = {
            {
                Title = "เข้าใจแล้ว",
                Icon = "bird",
            },
        }
    })
end



-- */  Window  /* --
local Window = WindUI:CreateWindow({
    Title = "SLEEP HUB",
    Author = "by .ftgs • Footagesus",
    Folder = "ftgshub",
    Icon = "rbxassetid://121030902371363",
    IconSize = 22*2,
    NewElements = true,
    --Size = UDim2.fromOffset(700,700),
    
    HideSearchBar = false,
    
    OpenButton = {
        Title = " SLEEP HIB UI", -- can be changed
        CornerRadius = UDim.new(1,0), -- fully rounded
        StrokeThickness = 3, -- removing outline
        Enabled = true, -- enable or disable openbutton
        Draggable = true,
        OnlyMobile = false,
        
        Color = ColorSequence.new( -- gradient
            Color3.fromHex("#30FF6A"), 
            Color3.fromHex("#e7ff2f")
        )
    },
    KeySystem = {
        Title = "Key System Example  |  WindUI Example",
        Note = "Key System. Key: ไม่มีกดยืนยันได้เลย",
        KeyValidator = function(EnteredKey)
            if EnteredKey == "2" then
                createPopup()
                return true
            end
            return true
            -- return EnteredKey == "1234" -- if key == "1234" then return true else return false end
        end
    }
})






local Tab = Window:Tab({
    Title = "หนัาหลัก",
    Icon = "bird", -- optional
    Locked = false,
})





local fishingActive = false
local fishingThread = nil

local Toggle = Tab:Toggle({
    Title = "Auto Fishing",
    Desc = "ทำงานอัตโนมัติเมื่อเปิด",
    Icon = "bird",
    Type = "Checkbox",
    Value = false,
    Callback = function(state) 
        fishingActive = state
        
        if state then
            -- เริ่มลูป
            fishingThread = task.spawn(function()
                while fishingActive do
                    -- เรียกใช้ฟังก์ชันต่างๆ
                    game:GetService("ReplicatedStorage"):WaitForChild("Packages"):WaitForChild("_Index"):WaitForChild("sleitnick_net@0.2.0"):WaitForChild("net"):WaitForChild("RF/ChargeFishingRod"):InvokeServer()
                    
                    local args = {
                        -0.5718746185302734,
                        1,
                        1765483909.133214
                    }
                    game:GetService("ReplicatedStorage"):WaitForChild("Packages"):WaitForChild("_Index"):WaitForChild("sleitnick_net@0.2.0"):WaitForChild("net"):WaitForChild("RF/RequestFishingMinigameStarted"):InvokeServer(unpack(args))
                    
                    game:GetService("ReplicatedStorage"):WaitForChild("Packages"):WaitForChild("_Index"):WaitForChild("sleitnick_net@0.2.0"):WaitForChild("net"):WaitForChild("RE/FishingCompleted"):FireServer()
                    
                    -- รอ 0.001 วินาที (แต่จริงๆ จะนานกว่านั้น)
                    task.wait(0.001)
                end
            end)
        else
            -- หยุดลูป
            if fishingThread then
                fishingActive = false
                task.wait(0.1) -- รอให้ลูปสิ้นสุด
                fishingThread = nil
            end
        end
    end
})
